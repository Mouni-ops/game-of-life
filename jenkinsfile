pipeline {
    agent {
        label ('HRMS &&QA')
    }
    parameters {
        string (
            name:'testresults',
            defaultValue: 'gameoflife-web/target/surefire-reports/*.xml',
            description: 'to get test results'
        )
        string (
            name: 'artifactresults',
            defaultValue: 'gameoflife-web/target/*.war',
            description: 'archiving the test results'
        )
        choice (
            name:'brancheTobuild',
            choices: ['DeclarativePipeline', 'ScriptedPipeline', 'master'],
            description: 'Branch to be build'
        )

        
    }
    triggers {
        cron('H */4 * * 1-5')
    }
    stages {
        stage('git') {        
            steps {
                git branch: "${params.brancheTobuild}",
                url:'https://github.com/Mouni-ops/game-of-life.git'
            }
        }
        stage('build') {
            steps {
                sh 'mvn clean package'
            }
        }
        stage('postbuild') {
            steps {
                junit testResults: "${params.testresults}"
                archive includes: "${params.artifactresults}"
            }
        }
               
    }
        

}